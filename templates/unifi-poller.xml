<?xml version="1.0"?>
<Container version="2">
  <Name>UniFi-Poller</Name>
  <Repository>golift/unifi-poller</Repository>
  <Registry>https://hub.docker.com/r/golift/unifi-poller/</Registry>
  <Shell>sh</Shell>
  <Network>bridge</Network>
  <Privileged>false</Privileged>
  <Changes>See https://github.com/unifi-poller/unifi-poller/wiki/CHANGES</Changes>
  <Support>https://community.ui.com/questions/UniFi-Poller-Store-UniFi-Controller-Metrics-in-Prometheus-or-InfluxDB/58a0ea34-d2b3-41cd-93bb-d95d3896d1a1</Support>
  <Project>https://github.com/unifi-poller/unifi-poller</Project>
  <Category>Tools:Utilities Network:Management</Category>
  <TemplateURL>https://raw.githubusercontent.com/selfhosters/unRAID-CA-templates/master/templates/unifi-poller.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/wiki/unifi-poller/unifi-poller/images/unifi-poller-logo.png</Icon>
  <Overview>
    Collect ALL UniFi Controller, Device and Client Data - Export to InfluxDB or Prometheus.
    Visualize with Grafana using included dashboards!
    IMPORTAT! ACTION REQUIRED! As of UniFi Poller version 2 all of the environment variables and config file format changed.
    You must reconfigure this container after you upgrade!
    This template works with poller versions 2.0.0+
    READ THE INSTRUCTIONS! https://github.com/unifi-poller/unifi-poller/wiki/Installation</Overview>
  <Description>Collect ALL UniFi Controller, Device and Client Data - Export to InfluxDB or Prometheus. Visualize with Grafana using included dashboards.</Description>
  <Networking>
    <Publish>
      <Port>
        <HostPort/>
        <ContainerPort>9031</ContainerPort>
        <Protocol>tcp</Protocol>
      </Port>
    </Publish>
  </Networking>
  <Environment>
    <!-- poller -->
    <Variable>
      <Value></Value>
      <Name>UP_POLLER_DEBUG</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_POLLER_QUIET</Name>
    </Variable>
    <!-- unifi -->
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_URL</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_USER</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_PASS</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_SAVE_DPI</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_SITES_0</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_SAVE_IDS</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_SAVE_SITES</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_UNIFI_CONTROLLER_0_VERIFY_SSL</Name>
    </Variable>
    <!-- influx -->
    <Variable>
      <Value></Value>
      <Name>UP_INFLUXDB_DISABLE</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_INFLUXDB_URL</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_INFLUXDB_USER</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_INFLUXDB_PASS</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_INFLUXDB_DB</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_INFLUXDB_INTERVAL</Name>
    </Variable>
    <!-- prometheus -->
    <Variable>
      <Value></Value>
      <Name>UP_PROMETHEUS_DISABLE</Name>
    </Variable>
    <Variable>
      <Value></Value>
      <Name>UP_PROMETHEUS_HTTP_LISTEN</Name>
    </Variable>
  </Environment>
  <Labels/>
  <!-- poller -->
  <Config Name="Poller Debug Mode" Target="UP_POLLER_DEBUG" Default="true|false" Mode="" Description="Container Variable: UP_POLLER_DEBUG - Setting true includes more log output." Type="Variable" Display="always-hide" Required="false" Mask="false">false</Config>
  <Config Name="Poller Quiet Mode" Target="UP_POLLER_QUIET" Default="true|false" Mode="" Description="Container Variable: UP_POLLER_QUIET - Setting true disables most log output." Type="Variable" Display="always-hide" Required="false" Mask="false">false</Config>
  <!-- unifi -->
  <Config Name="UniFi 1st Controller Host URL" Target="UP_UNIFI_CONTROLLER_0_URL" Default="https://unraid.ip:8443" Mode="" Description="Container Variable: UP_UNIFI_CONTROLLER_0_URL - URL for UniFi controller." Type="Variable" Display="always-hide" Required="true" Mask="false"></Config>
  <Config Name="UniFi 1st Controller Username" Target="UP_UNIFI_CONTROLLER_0_USER" Default="unifipoller" Mode="" Description="Container Variable: UP_UNIFI_CONTROLLER_0_USER - Username for UniFi Controller." Type="Variable" Display="always-hide" Required="true" Mask="false">unifipoller</Config>
  <Config Name="UniFi 1st Controller Password" Target="UP_UNIFI_CONTROLLER_0_PASS" Default="" Mode="" Description="Container Variable: UP_UNIFI_CONTROLLER_0_PASS - Password for UniFi Controller." Type="Variable" Display="always-hide" Required="true" Mask="true"></Config>
  <Config Name="UniFi 1st Controller Save DPI" Target="UP_UNIFI_CONTROLLER_0_SAVE_DPI" Default="true|false" Mode="" Description="Container Variable: UP_UNIFI_CONTROLLER_0_SAVE_DPI - Poll and save deep packet inspection data." Type="Variable" Display="always-hide" Required="false" Mask="false">false</Config>
  <Config Name="UniFi 1st Controller Save IDS" Target="UP_UNIFI_CONTROLLER_0_SAVE_IDS" Default="true|false" Mode="" Description="Container Variable: UP_UNIFI_CONTROLLER_0_SAVE_IDS - Save intrusion detection data (InfluxDB only). This data does not contain graphable metrics." Type="Variable" Display="advanced-hide" Required="false" Mask="false">false</Config>
  <Config Name="UniFi 1st Controller Save Sites" Target="UP_UNIFI_CONTROLLER_0_SAVE_SITES" Default="true|false" Mode="" Description="Container Value: UP_UNIFI_CONTROLLER_0_SAVE_SITES - Set this to 'false' to save space and resources in InfluxDB. This data powers the Network Sites dashboard." Type="Variable" Display="advanced-hide" Required="false" Mask="false">true</Config>
  <Config Name="UniFi 1st Controller Poll Sites" Target="UP_UNIFI_CONTROLLER_0_SITES_0" Default="all" Mode="" Description="Container Variable: UP_UNIFI_CONTROLLER_0_SITES_0 - List of sites to poll on controller, comma separated. Use cryptic ID values here; set to 'all' for all sites." Type="Variable" Display="advanced-hide" Required="false" Mask="false">all</Config>
  <Config Name="UniFi 1st Controller Verify SSL" Target="UP_UNIFI_CONTROLLER_0_VERIFY_SSL" Default="true|false" Mode="" Description="Container Variable: UP_UNIFI_CONTROLLER_0_VERIFY_SSL - Enable this if you have a valid SSL cert on your controller." Type="Variable" Display="advanced-hide" Required="false" Mask="false">false</Config>
  <!-- influx -->
  <Config Name="InfluxDB Host URL" Target="UP_INFLUXDB_URL" Default="http://unraid.ip:8086" Mode="" Description="Container Variable: UP_INFLUXDB_URL - URL for InfluxDB. Not important if using Prometheus only." Type="Variable" Display="always-hide" Required="false" Mask="false"></Config>
  <Config Name="InfluxDB Username" Target="UP_INFLUXDB_USER" Default="unifipoller" Mode="" Description="Container Variable: UP_INFLUXDB_USER - Username for InfluxDB. Usually unimportant because InfluxDB has no auth by default." Type="Variable" Display="always-hide" Required="false" Mask="false">unifipoller</Config>
  <Config Name="InfluxDB Password" Target="UP_INFLUXDB_PASS" Default="" Mode="" Description="Container Variable: UP_INFLUXDB_PASS - Password for InfluxDB (if required)" Type="Variable" Display="always-hide" Required="false" Mask="true"></Config>
  <Config Name="InfluxDB Database" Target="UP_INFLUXDB_DB" Default="unifi" Mode="" Description="Container Variable: UP_INFLUXDB_DB - InfluxDB database name. Create this first with: CREATE DATABASE unifi" Type="Variable" Display="always-hide" Required="false" Mask="false"></Config>
  <Config Name="InfluxDB Interval" Target="UP_INFLUXDB_INTERVAL" Default="15s|30s|45s|1m|90s|2m|3m|4m|5m" Mode="" Description="Container Variable: UP_INFLUXDB_INTERVAL - Polling interval for saving metrics into InfluxDB. 30s-90s recommend." Type="Variable" Display="always-hide" Required="false" Mask="false">30s</Config>
  <Config Name="InfluxDB Disabled" Target="UP_INFLUXDB_DISABLE" Default="true|false" Mode="" Description="Container Variable: UP_INFLUXDB_DISABLE - Disable InfluxDB polling. Set this true if you only use Prometheus." Type="Variable" Display="always-hide" Required="false" Mask="false">false</Config>
  <!-- prometheus -->
  <Config Name="Prometheus Listener" Target="UP_PROMETHEUS_HTTP_LISTEN" Default="0.0.0.0:9031" Mode="" Description="Container Value: UP_PROMETHEUS_HTTP_LISTEN - IP and port poller listens on for HTTP Prometheus scrapes. Must be in 0.0.0.0:port format." Type="Variable" Display="always-hide" Required="false" Mask="false">0.0.0.0:9031</Config>
  <Config Name="Prometheus Disabled" Target="UP_PROMETHEUS_DISABLE" Default="true|false" Mode="" Description="Container Variable: UP_PROMETHEUS_DISABLE - Disable Prometheus listener. Set true if you only use InfluxDB." Type="Variable" Display="always-hide" Required="false" Mask="false">false</Config>
</Container>
